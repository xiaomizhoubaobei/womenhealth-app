# 生理期管理页面需求文档

## 1. 页面概述

### 1.1 功能目标
生理期管理页面为用户提供完整的月经周期管理功能，包括周期记录、症状追踪、提醒设置和健康管理，帮助用户更好地了解和管理自己的生理周期。

### 1.2 核心价值
- **全面记录**：支持月经周期、流量、症状等多维度数据记录
- **智能提醒**：基于个人周期规律提供智能提醒服务
- **健康管理**：结合记录数据提供个性化健康管理建议
- **数据可视化**：直观展示月经周期和相关健康数据

## 2. 功能需求

### 2.1 周期记录功能
- **月经开始记录**：记录月经开始日期和初始状态
- **月经结束记录**：记录月经结束日期和总结信息
- **流量等级设置**：设置每日经血流量等级（轻微/正常/较多/很多）
- **症状标记**：标记每日出现的身体症状和情绪变化
- **备注添加**：添加个性化备注和观察记录

### 2.2 症状追踪功能
- **症状选择**：提供常见症状选项（痛经、头痛、情绪波动等）
- **症状严重度**：设置症状严重程度（轻微/中等/严重）
- **自定义症状**：支持用户添加自定义症状标签
- **症状统计**：统计症状出现频率和持续时间

### 2.3 智能提醒功能
- **经期提醒**：预测下次月经开始时间并提前提醒
- **排卵期提醒**：预测排卵期并提供相关提醒
- **症状记录提醒**：提醒用户记录每日症状
- **自定义提醒**：支持用户设置个性化提醒

### 2.4 健康管理功能
- **周期预测**：基于历史数据预测未来月经周期
- **健康评分**：根据记录数据生成健康评分
- **趋势分析**：分析周期和症状变化趋势
- **个性化建议**：根据数据提供健康管理建议

## 3. 页面设计

### 3.1 页面布局
```
+----------------------------------------------------+
| 顶部导航栏                                         |
| [返回] 生理期管理 [设置]                           |
+----------------------------------------------------+
| 今日概览                                           |
| 今天是月经期第3天     流量: 正常                   |
| [记录今日症状] [添加备注]                          |
+----------------------------------------------------+
| 日历视图                                           |
| [月视图] [周视图]                                  |
| 日期  状态  流量  症状                            |
| 01   ●●●  正常  痛经                             |
| 02   ●●●  较多  头痛,情绪波动                     |
| ...                                               |
+----------------------------------------------------+
| 快捷操作                                           |
| [记录月经开始] [记录月经结束] [添加症状]           |
+----------------------------------------------------+
| 健康洞察                                           |
| [周期预测] [健康评分] [趋势分析]                   |
+----------------------------------------------------+
| 设置区域                                           |
| [提醒设置] [导出数据] [备份]                       |
+----------------------------------------------------+
```

### 3.2 交互设计
- **日期选择**：支持点击日期查看或编辑详细信息
- **快速记录**：提供快捷按钮快速记录常用信息
- **滑动操作**：支持左右滑动切换月份
- **长按编辑**：支持长按日期快速编辑记录

## 4. 技术实现

### 4.1 数据模型
```kotlin
data class MenstrualRecord(
    val id: Long = 0,
    val date: Date, // 记录日期
    val periodStatus: PeriodStatus, // 月经状态
    val flowLevel: FlowLevel, // 流量等级
    val symptoms: List<SymptomRecord>, // 症状记录
    val notes: String?, // 备注
    val createdAt: Date = Date(),
    val updatedAt: Date = Date()
)

enum class PeriodStatus {
    NONE, // 无月经
    START, // 月经开始
    DURING, // 月经期间
    END // 月经结束
}

data class SymptomRecord(
    val symptom: MenstrualSymptom, // 症状类型
    val severity: SymptomSeverity, // 严重程度
    val notes: String? // 症状备注
)

enum class SymptomSeverity {
    MILD, // 轻微
    MODERATE, // 中等
    SEVERE // 严重
)
```

### 4.2 核心服务
- **记录管理服务**：负责月经记录的增删改查
- **预测引擎**：基于历史数据预测未来周期
- **提醒服务**：管理各类提醒的设置和触发
- **数据分析服务**：分析记录数据生成健康洞察

## 5. 性能要求

### 5.1 响应时间
- 页面加载时间：≤ 1秒
- 记录保存时间：≤ 0.5秒
- 预测计算时间：≤ 2秒

### 5.2 内存使用
- 页面内存占用：≤ 30MB
- 数据库操作内存：≤ 10MB

## 6. 安全与隐私

### 6.1 数据保护
- 所有数据本地存储，采用AES-256加密
- 备份数据加密存储
- 数据导出时进行加密处理

### 6.2 权限要求
- 存储权限：用于数据备份和导出
- 通知权限：用于发送提醒通知

## 7. 测试计划

### 7.1 功能测试
- 验证记录功能的完整性和准确性
- 验证预测算法的准确性
- 验证提醒功能的及时性
- 验证数据导出导入功能

### 7.2 性能测试
- 大量数据记录性能测试
- 预测算法性能测试
- 页面响应速度测试

### 7.3 兼容性测试
- 不同Android版本兼容性测试
- 不同屏幕尺寸适配测试

## 8. 项目计划

### 8.1 开发周期
- 需求分析：1周
- UI设计：1周
- 核心功能开发：3周
- 测试与优化：1周
- 总计：6周

### 8.2 里程碑
- [ ] 完成页面UI设计
- [ ] 实现记录管理核心功能
- [ ] 完成预测引擎开发
- [ ] 实现提醒服务功能
- [ ] 完成测试与优化