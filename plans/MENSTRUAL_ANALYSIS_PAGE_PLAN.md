# 生理期分析页面需求文档

## 1. 页面概述

### 1.1 功能目标
生理期分析页面旨在为用户提供全面的月经周期数据分析，通过可视化图表和统计信息帮助用户深入了解自己的生理周期规律、症状变化和健康趋势。

### 1.2 核心价值
- **周期规律洞察**：分析月经周期的规律性和变化趋势
- **症状关联分析**：揭示症状与月经周期阶段的关系
- **健康趋势预测**：基于历史数据预测未来周期变化
- **个性化健康建议**：根据分析结果提供定制化健康指导

## 2. 功能需求

### 2.1 数据可视化展示
- **周期长度趋势图**：折线图展示近6个月/12个月的周期长度变化
- **经期长度分布图**：柱状图展示不同经期长度的出现频率
- **流量等级统计图**：饼图展示不同流量等级的占比
- **症状热力图**：热力图展示症状在周期中的分布情况

### 2.2 统计分析功能
- **平均周期长度**：计算并显示平均周期天数
- **周期规律性评分**：基于标准差计算周期规律性（0-100分）
- **经期长度分析**：统计平均经期天数和变化范围
- **流量模式分析**：分析流量等级的变化趋势和规律

### 2.3 症状关联分析
- **症状频率统计**：统计各症状出现的频率和严重程度
- **症状周期分布**：分析症状在月经周期不同阶段的出现规律
- **症状组合分析**：识别经常同时出现的症状组合
- **症状影响评估**：评估症状对日常生活的影响程度

### 2.4 AI智能分析
- **周期模式识别**：使用机器学习算法识别用户的月经周期模式
- **症状预测模型**：基于历史数据预测未来可能出现的症状
- **异常检测AI**：使用AI算法检测异常的周期和症状模式
- **个性化健康洞察**：通过AI分析生成个性化的健康洞察

### 2.5 健康洞察报告
- **周期稳定性评估**：评估月经周期的稳定性并给出评分
- **异常周期识别**：识别周期异常并提供可能原因分析
- **健康风险预警**：基于数据分析识别潜在健康风险
- **AI驱动建议**：基于AI分析结果提供智能化的健康建议
- **趋势预测**：使用AI模型预测未来周期和症状趋势

## 3. 页面设计

### 3.1 页面布局
```
+----------------------------------------------------+
| 顶部状态栏                                         |
| [用户头像]  [通知]  [设置]                         |
+----------------------------------------------------+
| 时间筛选器                                         |
| [近3个月] [近6个月] [近12个月] [自定义]            |
+----------------------------------------------------+
| 核心指标展示                                       |
| 周期规律性: 85分     平均周期: 28天                |
| 平均经期: 5天        异常周期: 2次                 |
+----------------------------------------------------+
| 数据可视化区域                                     |
| [周期长度趋势图]                                   |
| [经期长度分布图]                                   |
| [流量等级统计图]                                   |
| [症状热力图]                                       |
+----------------------------------------------------+
| 健康洞察区域                                       |
| [周期稳定性评估]                                   |
| [异常周期识别]                                     |
| [健康风险预警]                                     |
| [个性化建议]                                       |
+----------------------------------------------------+
| 底部导航栏                                         |
| [生理期] [孕期] [宫颈] [生理用品] [我的]           |
+----------------------------------------------------+

导航项说明:
- **生理期**：跳转至生理期管理页面，进行月经周期记录和症状追踪
- **孕期**：跳转至孕期管理页面，进行备孕和孕期健康管理
- **宫颈**：跳转至宫颈分析页面，查看宫颈健康分析
- **生理用品**：跳转至生理用品分析页面，分析卫生用品使用情况
- **我的**：跳转至个人中心页面，查看个人设置和数据管理

```

### 3.2 交互设计
- **时间筛选**：支持按不同时间范围筛选数据，默认显示近6个月数据
- **图表交互**：支持点击图表元素查看详细信息
- **数据导出**：支持将分析报告导出为PDF或图片格式
- **分享功能**：支持将分析结果分享给医生或朋友

## 4. 技术实现

### 4.1 数据模型
```kotlin
data class MenstrualAnalysisResult(
    val cycleRegularityScore: Int, // 周期规律性评分(0-100)
    val averageCycleLength: Double, // 平均周期长度
    val averagePeriodLength: Double, // 平均经期长度
    val cycleLengthTrend: List<CycleDataPoint>, // 周期长度趋势
    val flowLevelDistribution: Map<FlowLevel, Int>, // 流量等级分布
    val symptomFrequency: Map<MenstrualSymptom, Int>, // 症状频率
    val abnormalCycles: List<AbnormalCycle>, // 异常周期记录
    val healthInsights: List<HealthInsight>, // 健康洞察
    val recommendations: List<Recommendation> // 个性化建议
)

data class CycleDataPoint(
    val date: Date,
    val cycleLength: Int,
    val periodLength: Int,
    val flowLevel: FlowLevel
)

data class HealthInsight(
    val type: InsightType,
    val title: String,
    val description: String,
    val severity: SeverityLevel
)

enum class InsightType {
    CYCLE_REGULARITY, // 周期规律性
    SYMPTOM_PATTERN, // 症状模式
    HEALTH_RISK, // 健康风险
    LIFESTYLE // 生活方式
}
```

### 4.2 核心算法
- **周期规律性计算**：基于周期长度标准差计算规律性评分
- **趋势分析算法**：使用线性回归分析周期长度变化趋势
- **症状关联分析**：使用相关性分析识别症状与周期的关系
- **异常检测算法**：基于统计学方法识别异常周期

## 5. 性能要求

### 5.1 响应时间
- 页面加载时间：≤ 2秒
- 图表渲染时间：≤ 1秒
- 数据计算时间：≤ 3秒

### 5.2 内存使用
- 页面内存占用：≤ 50MB
- 图表渲染内存：≤ 20MB

## 6. 安全与隐私

### 6.1 数据保护
- 所有分析数据仅在本地处理，不上传至服务器
- 分析报告导出时进行加密处理
- 分享功能需用户明确授权

### 6.2 权限要求
- 无需额外权限，仅使用应用内已有数据

## 7. 测试计划

### 7.1 功能测试
- 验证数据分析准确性
- 验证图表显示正确性
- 验证时间筛选功能
- 验证数据导出功能

### 7.2 性能测试
- 页面加载性能测试
- 大数据量处理测试
- 内存泄漏检测

### 7.3 兼容性测试
- 不同Android版本兼容性测试
- 不同屏幕尺寸适配测试

## 8. 项目计划

### 8.1 开发周期
- 需求分析：1周
- UI设计：1周
- 核心功能开发：2周
- 测试与优化：1周
- 总计：5周

### 8.2 里程碑
- [ ] 完成页面UI设计
- [ ] 实现数据分析核心功能
- [ ] 完成图表可视化功能
- [ ] 实现健康洞察报告功能
- [ ] 完成测试与优化

