# 宫颈粘液分析页面需求文档

## 1. 页面概述

### 1.1 功能目标
宫颈粘液分析页面专注于女性宫颈粘液的观察记录与分析，通过追踪宫颈粘液的颜色、质地、拉丝度等关键特征，结合月经周期数据，帮助用户识别排卵期，了解生育窗口，并监测生殖健康状况。

### 1.2 核心价值
- **生育力监测**：通过宫颈粘液变化识别排卵期和生育窗口
- **健康状况评估**：评估生殖系统健康状况
- **周期规律洞察**：揭示宫颈粘液与月经周期的关系
- **个性化指导**：根据粘液模式提供个性化健康建议

## 2. 功能需求

### 2.1 宫颈粘液记录功能
- **外观特征记录**：记录宫颈粘液的颜色、透明度等外观特征
- **质地特征记录**：记录宫颈粘液的质地（粘稠/奶油状/蛋清状等）
- **拉丝度测试**：记录宫颈粘液的拉丝长度和弹性
- **触感描述**：记录宫颈粘液的触感和湿润度
- **观察时间记录**：记录观察日期和时间（建议在固定时间）

### 2.2 粘液模式追踪
- **日间变化追踪**：追踪同一天内宫颈粘液的变化
- **周期性模式分析**：分析宫颈粘液在整个周期中的变化模式
- **生育窗口识别**：识别最易受孕的时间窗口
- **个体特征分析**：分析用户的宫颈粘液个体特征

### 2.3 AI智能分析
- **粘液模式识别**：使用AI算法识别用户的宫颈粘液变化模式
- **排卵期精准预测**：通过AI分析提高排卵期预测准确性
- **生育力评估**：基于AI模型评估用户的生育力水平
- **异常粘液检测**：识别异常的宫颈粘液模式并提供预警

### 2.4 排卵期预测
- **排卵指标识别**：识别宫颈粘液中的排卵指标
- **排卵日预测**：预测最可能的排卵日
- **受孕时机建议**：提供最佳受孕时机建议
- **预测准确性评估**：评估预测结果的准确性

### 2.5 健康评估与教育
- **粘液健康评分**：基于记录数据生成宫颈粘液健康评分
- **异常模式识别**：识别异常的宫颈粘液模式
- **健康知识教育**：提供宫颈粘液相关的健康知识
- **个性化建议**：根据分析结果提供个性化健康建议

## 3. 页面设计

### 3.1 页面布局
```
+----------------------------------------------------+
| 顶部状态栏                                         |
| [用户头像]  [通知]  [设置]                         |
+----------------------------------------------------+
| 今日粘液状态                                       |
| 质地: 蛋清状    拉丝度: 8cm    透明度: 高         |
| [记录今日状态] [查看历史]                          |
+----------------------------------------------------+
| 快速记录面板                                       |
| [干燥] [粘稠] [奶油状] [蛋清状] [其他]             |
| [透明] [白色] [黄色] [其他]                        |
+----------------------------------------------------+
| 数据记录区域                                       |
| 日期      质地        拉丝度    透明度    备注    |
| 5月1日    粘稠        2cm       白色      无      |
| 5月5日    奶油状      4cm       微黄      轻微腹胀|
| 5月10日   蛋清状      8cm       透明      润滑感强|
+----------------------------------------------------+
| 变化趋势图表                                       |
| [质地变化图]  [拉丝度变化图]  [透明度变化图]       |
+----------------------------------------------------+
| 排卵分析区域                                       |
| 预测排卵日: 5月12日  生育窗口: 5月10-14日          |
| [排卵指标]  [受孕建议]  [准确性评估]               |
+----------------------------------------------------+
| 健康评估                                           |
| 粘液健康评分: 88分  [查看详情]                     |
| [异常预警]  [健康知识]  [个性化建议]               |
+----------------------------------------------------+
| 底部导航栏                                         |
| [生理期] [孕期] [宫颈] [生理用品] [我的]           |
+----------------------------------------------------+

导航项说明:
- **生理期**：跳转至生理期管理页面，进行月经周期记录和症状追踪
- **孕期**：跳转至孕期管理页面，进行备孕和孕期健康管理
- **宫颈**：跳转至宫颈粘液分析页面，查看宫颈粘液变化分析
- **生理用品**：跳转至生理用品分析页面，分析卫生用品使用情况
- **我的**：跳转至个人中心页面，查看个人设置和数据管理

```

### 3.2 交互设计
- **快速记录**：提供便捷的粘液状态快速记录按钮
- **详细记录**：支持详细记录各项粘液特征
- **图表交互**：支持点击查看图表详细信息
- **数据筛选**：支持按时间范围筛选数据

## 4. 技术实现

### 4.1 数据模型
```kotlin
data class CervicalMucusRecord(
    val id: String = UUID.randomUUID().toString(),
    val date: Date, // 记录日期
    val consistency: MucusConsistency, // 粘稠度
    val appearance: MucusAppearance, // 外观
    val stretchiness: MucusStretchiness, // 拉丝度
    val sensation: MucusSensation, // 感觉
    val color: MucusColor, // 颜色
    val transparency: MucusTransparency, // 透明度
    val notes: String?, // 备注
    val cycleDay: Int?, // 月经周期第几天
    val relatedSymptoms: List<MenstrualSymptom>, // 相关症状
    val createdAt: Date = Date(),
    val updatedAt: Date = Date()
)

enum class MucusConsistency(val displayName: String) {
    DRY("干燥"), // 完全干燥，无粘液
    STICKY("粘稠"), // 粘稠，类似胶水
    CREAMY("奶油状"), // 奶油状，类似酸奶
    WATERY("水状"), // 水状，流动性强
    EGG_WHITE("蛋清状") // 蛋清状，最易受孕的粘液
}

enum class MucusAppearance(val displayName: String) {
    CLOUDY("浑浊"), // 浑浊不透明
    CREAMY_WHITE("奶白色"), // 奶白色
    TRANSLUCENT("半透明"), // 半透明
    CLEAR("透明") // 透明
}

data class MucusStretchiness(
    val length: Double, // 拉丝长度(cm)
    val elasticity: ElasticityLevel // 弹性等级
)

enum class ElasticityLevel(val displayName: String, val description: String) {
    NONE("无弹性", "无法拉丝"),
    LOW("低弹性", "拉丝长度<2cm"),
    MEDIUM("中弹性", "拉丝长度2-5cm"),
    HIGH("高弹性", "拉丝长度5-10cm"),
    VERY_HIGH("极高弹性", "拉丝长度>10cm")
}

enum class MucusSensation(val displayName: String) {
    DRY("干燥"), // 完全干燥感
    SLIGHTLY_MOIST("微湿"), // 轻微湿润感
    MOIST("湿润"), // 明显湿润感
    SLIPPERY("滑腻"), // 滑腻感，类似润滑剂
    WET("湿润光滑") // 湿润且光滑
}

data class CervicalMucusAnalysisResult(
    val fertilityScore: Int, // 生育力评分(0-100)
    val consistencyPattern: ConsistencyPattern, // 粘稠度变化模式
    val appearancePattern: AppearancePattern, // 外观变化模式
    val stretchinessPattern: StretchinessPattern, // 拉丝度变化模式
    val ovulationPredictions: List<OvulationPrediction>, // 排卵预测
    val fertileWindow: FertileWindow, // 生育窗口
    val abnormalPatterns: List<AbnormalPattern>, // 异常模式
    val healthInsights: List<HealthInsight>, // 健康洞察
    val recommendations: List<Recommendation> // 建议
)

data class FertileWindow(
    val startDate: Date, // 生育窗口开始日期
    val endDate: Date, // 生育窗口结束日期
    val peakDay: Date, // 最易受孕日
    val confidence: ConfidenceLevel // 预测置信度
)
```

### 4.2 核心算法
- **模式识别算法**：识别宫颈粘液的周期性变化模式
- **排卵预测算法**：基于粘液特征预测排卵日
- **生育窗口计算**：计算最易受孕的时间窗口
- **异常检测算法**：识别异常的粘液模式

## 5. 性能要求

### 5.1 响应时间
- 页面加载时间：≤ 1.5秒
- 数据保存时间：≤ 0.5秒
- 分析计算时间：≤ 2秒

### 5.2 内存使用
- 页面内存占用：≤ 30MB
- 图表渲染内存：≤ 15MB

## 6. 安全与隐私

### 6.1 数据保护
- 所有数据本地存储，采用AES-256加密
- 敏感数据（生育相关信息）加强保护
- 数据导出时进行加密处理

### 6.2 权限要求
- 存储权限：用于数据备份和导出
- 相机权限（可选）：用于拍摄粘液样本照片

## 7. 测试计划

### 7.1 功能测试
- 验证数据记录功能的完整性和准确性
- 验证图表显示正确性
- 验证排卵预测算法准确性
- 验证生育窗口计算准确性

### 7.2 性能测试
- 大量数据记录性能测试
- 分析算法性能测试
- 页面响应速度测试

### 7.3 兼容性测试
- 不同Android版本兼容性测试
- 不同屏幕尺寸适配测试

## 8. 项目计划

### 8.1 开发周期
- 需求分析：1周
- UI设计：1周
- 核心功能开发：3周
- 测试与优化：1周
- 总计：6周

### 8.2 里程碑
- [ ] 完成页面UI设计
- [ ] 实现宫颈粘液记录功能
- [ ] 完成图表可视化功能
- [ ] 实现排卵预测和生育窗口计算
- [ ] 完成测试与优化

